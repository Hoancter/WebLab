{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hoann\\\\Documents\\\\code\\\\Practice_MSIS207\\\\In_Class\\\\Lab4\\\\Exercise1\\\\exercise1.6\\\\src\\\\SimpleForm.js\",\n  _s = $RefreshSig$();\nimport { useCallback, useEffect, useState } from 'react';\nimport FormContext from '. /FormContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SimpleForm = _ref => {\n  _s();\n  let {\n    children,\n    value,\n    onChange,\n    onValid\n  } = _ref;\n  const [values, setValues] = useState(value || {});\n  const [dirtyFields, setDirtyFields] = useState({});\n  const [invalidFields, setInvalidFields] = useState({});\n  useEffect(() => {\n    setValues(value || {});\n  }, [value]);\n  useEffect(() => {\n    if (onChange) {\n      onChange(values);\n    }\n  }, [onChange, values]);\n  useEffect(() => {\n    if (onValid) {\n      onValid(Object.keys(invalidFields).every(i => !invalidFields[i]), invalidFields);\n    }\n  }, [LonValid, invalidFields]);\n  const setValue = useCallback((field, v) => setValues(vs => ({\n    ...vs,\n    [field]: v\n  })), [setValues]);\n  const getValue = useCallback(field => values[field], [values]);\n  const setDirty = useCallback(field => setDirtyFields(df => ({\n    ...df,\n    [field]: true\n  })), [setDirtyFields]);\n  const getDirty = useCallback(field => Object.keys(dirtyFields).includes(field), [dirtyFields]);\n  const setInvalid = useCallback((field, error) => {\n    setInvalidFields(i => ({\n      ...i,\n      [field]: error ? error : undefined\n    }));\n  }, [setInvalidFields]);\n  const form = {\n    setValue: setValue,\n    value: getValue,\n    setDirty: setDirty,\n    isDirty: getDirty,\n    setInvalid: setInvalid\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"SimpleForm-container\",\n    children: /*#__PURE__*/_jsxDEV(FormContext.Provider, {\n      value: form,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(SimpleForm, \"PBi9HzXvw0Xi62jcjkyl3vE2qTk=\");\n_c = SimpleForm;\nexport default SimpleForm;\nvar _c;\n$RefreshReg$(_c, \"SimpleForm\");","map":{"version":3,"names":["useCallback","useEffect","useState","FormContext","SimpleForm","children","value","onChange","onValid","values","setValues","dirtyFields","setDirtyFields","invalidFields","setInvalidFields","Object","keys","every","i","LonValid","setValue","field","v","vs","getValue","setDirty","df","getDirty","includes","setInvalid","error","undefined","form","isDirty"],"sources":["C:/Users/hoann/Documents/code/Practice_MSIS207/In_Class/Lab4/Exercise1/exercise1.6/src/SimpleForm.js"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react'\r\nimport FormContext from'. /FormContext'\r\n\r\nconst SimpleForm = ({ children, value, onChange, onValid }) =>{\r\nconst [values, setValues] = useState (value || {})\r\nconst [dirtyFields, setDirtyFields] = useState({})\r\nconst [invalidFields, setInvalidFields]= useState({})\r\n\r\n\r\nuseEffect(()=>\r\n{\r\nsetValues (value || {})\r\n}, [value])\r\nuseEffect(() =>\r\n{\r\nif (onChange)\r\n{\r\nonChange(values)\r\n}\r\n}, [onChange, values])\r\nuseEffect(() => {\r\nif (onValid) {\r\nonValid(\r\nObject.keys (invalidFields).every((i) => !invalidFields[i]),\r\ninvalidFields\r\n)\r\n}\r\n}, [LonValid, invalidFields])\r\nconst setValue = useCallback(\r\n(field, v) => setValues ((vs) => ({...vs, [field]: v })),\r\n[setValues]\r\n)\r\nconst getValue = useCallback ( (field) => values [field], [values])\r\nconst setDirty\r\n= useCallback(\r\n(field) => setDirtyFields ((df) => ({...df, [field]: true })),\r\n[setDirtyFields]\r\n)\r\n\r\nconst getDirty = useCallback(\r\n    (field) => Object.keys (dirtyFields).includes (field),\r\n    [dirtyFields]\r\n    )\r\n    const setInvalid = useCallback(\r\n    (field, error) =>\r\n    {\r\n    setInvalidFields((i) => ({\r\n    ...i,\r\n    [field]: error ? error: undefined,\r\n    }))\r\n},\r\n    [setInvalidFields]\r\n    )\r\n    const form = {\r\n    setValue: setValue,\r\n    value: getValue,\r\n    \r\n    setDirty: setDirty,\r\n    isDirty: getDirty,\r\n    setInvalid:setInvalid,\r\n    }\r\n    return (\r\n    <div className=\"SimpleForm-container\">\r\n    <FormContext.Provider value={form}>\r\n    {children}\r\n    </FormContext.Provider>\r\n    </div>\r\n    \r\n    )\r\n}\r\n    \r\n    export default SimpleForm"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACxD,OAAOC,WAAW,MAAK,gBAAgB;AAAA;AAEvC,MAAMC,UAAU,GAAG,QAA2C;EAAA;EAAA,IAA1C;IAAEC,QAAQ;IAAEC,KAAK;IAAEC,QAAQ;IAAEC;EAAQ,CAAC;EAC1D,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAEI,KAAK,IAAI,CAAC,CAAC,CAAC;EAClD,MAAM,CAACK,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,CAAC,CAAC,CAAC;EAClD,MAAM,CAACW,aAAa,EAAEC,gBAAgB,CAAC,GAAEZ,QAAQ,CAAC,CAAC,CAAC,CAAC;EAGrDD,SAAS,CAAC,MACV;IACAS,SAAS,CAAEJ,KAAK,IAAI,CAAC,CAAC,CAAC;EACvB,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EACXL,SAAS,CAAC,MACV;IACA,IAAIM,QAAQ,EACZ;MACAA,QAAQ,CAACE,MAAM,CAAC;IAChB;EACA,CAAC,EAAE,CAACF,QAAQ,EAAEE,MAAM,CAAC,CAAC;EACtBR,SAAS,CAAC,MAAM;IAChB,IAAIO,OAAO,EAAE;MACbA,OAAO,CACPO,MAAM,CAACC,IAAI,CAAEH,aAAa,CAAC,CAACI,KAAK,CAAEC,CAAC,IAAK,CAACL,aAAa,CAACK,CAAC,CAAC,CAAC,EAC3DL,aAAa,CACZ;IACD;EACA,CAAC,EAAE,CAACM,QAAQ,EAAEN,aAAa,CAAC,CAAC;EAC7B,MAAMO,QAAQ,GAAGpB,WAAW,CAC5B,CAACqB,KAAK,EAAEC,CAAC,KAAKZ,SAAS,CAAGa,EAAE,KAAM;IAAC,GAAGA,EAAE;IAAE,CAACF,KAAK,GAAGC;EAAE,CAAC,CAAC,CAAC,EACxD,CAACZ,SAAS,CAAC,CACV;EACD,MAAMc,QAAQ,GAAGxB,WAAW,CAAIqB,KAAK,IAAKZ,MAAM,CAAEY,KAAK,CAAC,EAAE,CAACZ,MAAM,CAAC,CAAC;EACnE,MAAMgB,QAAQ,GACZzB,WAAW,CACZqB,KAAK,IAAKT,cAAc,CAAGc,EAAE,KAAM;IAAC,GAAGA,EAAE;IAAE,CAACL,KAAK,GAAG;EAAK,CAAC,CAAC,CAAC,EAC7D,CAACT,cAAc,CAAC,CACf;EAED,MAAMe,QAAQ,GAAG3B,WAAW,CACvBqB,KAAK,IAAKN,MAAM,CAACC,IAAI,CAAEL,WAAW,CAAC,CAACiB,QAAQ,CAAEP,KAAK,CAAC,EACrD,CAACV,WAAW,CAAC,CACZ;EACD,MAAMkB,UAAU,GAAG7B,WAAW,CAC9B,CAACqB,KAAK,EAAES,KAAK,KACb;IACAhB,gBAAgB,CAAEI,CAAC,KAAM;MACzB,GAAGA,CAAC;MACJ,CAACG,KAAK,GAAGS,KAAK,GAAGA,KAAK,GAAEC;IACxB,CAAC,CAAC,CAAC;EACP,CAAC,EACG,CAACjB,gBAAgB,CAAC,CACjB;EACD,MAAMkB,IAAI,GAAG;IACbZ,QAAQ,EAAEA,QAAQ;IAClBd,KAAK,EAAEkB,QAAQ;IAEfC,QAAQ,EAAEA,QAAQ;IAClBQ,OAAO,EAAEN,QAAQ;IACjBE,UAAU,EAACA;EACX,CAAC;EACD,oBACA;IAAK,SAAS,EAAC,sBAAsB;IAAA,uBACrC,QAAC,WAAW,CAAC,QAAQ;MAAC,KAAK,EAAEG,IAAK;MAAA,UACjC3B;IAAQ;MAAA;MAAA;MAAA;IAAA;EACc;IAAA;IAAA;IAAA;EAAA,QACjB;AAGV,CAAC;AAAA,GAlEKD,UAAU;AAAA,KAAVA,UAAU;AAoEZ,eAAeA,UAAU;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}